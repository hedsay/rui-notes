(window.webpackJsonp=window.webpackJsonp||[]).push([[144],{468:function(s,t,a){"use strict";a.r(t);var n=a(4),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"流量控制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#流量控制"}},[s._v("#")]),s._v(" 流量控制")]),s._v(" "),t("blockquote",[t("p",[s._v("让发送方根据接收方的实际接受能力控制发送的数据量；")])]),s._v(" "),t("h2",{attrs:{id:"窗口关闭死锁"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#窗口关闭死锁"}},[s._v("#")]),s._v(" 窗口关闭死锁")]),s._v(" "),t("blockquote",[t("p",[s._v("窗口关闭的死锁现象：当接收方来不及处理，滑动窗口大小设置为0，等到接收方数据处理完之后，发送一个窗口非0的ack报文，如果该报文丢失，陷入死锁状态；")])]),s._v(" "),t("p",[s._v("解决方法：")]),s._v(" "),t("blockquote",[t("p",[s._v("tcp收到零窗口通知的那一方会启动计时器，超时后，发送窗口探测报文；")])]),s._v(" "),t("h2",{attrs:{id:"糊涂窗口综合征"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#糊涂窗口综合征"}},[s._v("#")]),s._v(" 糊涂窗口综合征")]),s._v(" "),t("blockquote",[t("p",[s._v("背景：TCP+IP头部有40个字节，如果只传输几个字节，开销太过于浪费；")]),s._v(" "),t("p",[s._v("如果接收方来不及处理数据，发送方窗口越来越小，如果窗口只剩几个字节，发送方也会选择发送；")])]),s._v(" "),t("p",[s._v("解决方法：")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("接收方不通知小窗口")]),s._v(" "),t("p",[s._v("当窗口大小<MSS/2，向发送方通知窗口为0；")])]),s._v(" "),t("li",[t("p",[s._v("发送方避免发送小数据")]),s._v(" "),t("p",[s._v("Nagle算法，囤积数据；")]),s._v(" "),t("blockquote",[t("div",{staticClass:"language-c line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" 有数据要发送 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" 可用窗口大小 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),s._v(" MSS and 可发送的数据 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),s._v(" MSS "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n \t立刻发送MSS大小的数据\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" 有未确认的数据 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n         将数据放入缓存等待接收ACK\n     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n         立刻发送数据\n     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])])])])])])}),[],!1,null,null,null);t.default=e.exports}}]);