(window.webpackJsonp=window.webpackJsonp||[]).push([[220],{544:function(s,t,n){"use strict";n.r(t);var a=n(4),e=Object(a.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"aop-ioc"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#aop-ioc"}},[s._v("#")]),s._v(" AOP&IOC")]),s._v(" "),t("p",[s._v("IOC：控制反转，它是一种思想，将手动创建对象的权力交给Spring，由容器来控制对象的生命周期和对象之间的关系。以前对象是手动创建，现在是向容器索要；")]),s._v(" "),t("blockquote",[t("p",[s._v("为什么叫控制反转？")]),s._v(" "),t("p",[s._v("控制对象生命周期的不再是引用它的对象，而是容器；")]),s._v(" "),t("p",[s._v("Spring的IOC负责管理bean的生命周期，在底层，这个过程通过BeanPostProcessor接口和BeanFactoryPostProcessor接口来实现；")]),s._v(" "),t("ul",[t("li",[s._v("BeanFactoryPostProcessor：在容器加载配置文件时，对配置信息进行修改或扩展；")]),s._v(" "),t("li",[s._v("BeanPostProcessor：负责在bean的初始化前后进行一些处理操作，如AOP代理、属性注入等；")])])]),s._v(" "),t("p",[s._v("AOP：面向切面编程，将一些业务逻辑中相同代码抽取到一个独立的模块中，降低模块耦合，让业务逻辑更加清爽。在使用时，首先自定义一个注解作为切点，再定义一个切面类，并为需要增强的方法添加注解，Spring回将切面逻辑自动注入到这个方法中，从而实现AOP功能；")]),s._v(" "),t("blockquote",[t("p",[s._v("原理：基于动态代理，如果代理对象实现了某个接口，使用jdk动态代理创建对象；如果没有实现接口，会用cglib生成一个被代理对象的子类作为代理；")])]),s._v(" "),t("h2",{attrs:{id:"依赖注入"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#依赖注入"}},[s._v("#")]),s._v(" 依赖注入")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("@Autowired：根据类型匹配；")]),s._v(" "),t("blockquote",[t("p",[s._v("如果一个接口有多个实现类，再用@Qualifier根据名称注入；")])])]),s._v(" "),t("li",[t("p",[s._v("@Resource：根据名称匹配；")])])]),s._v(" "),t("h2",{attrs:{id:"bean的生命周期"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#bean的生命周期"}},[s._v("#")]),s._v(" Bean的生命周期")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("实例化")]),s._v(" "),t("blockquote",[t("p",[s._v("Spring容器根据Bean的定义创建Bean的实例，相当于执行构造方法，也就是 new 一个对象；")])])]),s._v(" "),t("li",[t("p",[s._v("属性填充")]),s._v(" "),t("blockquote",[t("p",[s._v("相当于执行 setter 方法为字段赋值；")])])]),s._v(" "),t("li",[t("p",[s._v("初始化")]),s._v(" "),t("blockquote",[t("p",[s._v("初始化阶段允许执行自定义的逻辑，比如设置某些必要的属性值、开启资源、执行预加载操作等，以确保 Bean 在使用之前是完全配置好的；")])])]),s._v(" "),t("li",[t("p",[s._v("Bean使用")])]),s._v(" "),t("li",[t("p",[s._v("销毁")]),s._v(" "),t("blockquote",[t("p",[s._v("如果Bean实现了DisposableBean接口，执行destroy()方法；相当于执行了=null，释放资源；")])])])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://aurora-nr.oss-cn-beijing.aliyuncs.com/7fb5635791f20ad4cbe8dfd939f27ca6.png",alt:""}})]),s._v(" "),t("h2",{attrs:{id:"spring循环依赖问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#spring循环依赖问题"}},[s._v("#")]),s._v(" Spring循环依赖问题")]),s._v(" "),t("blockquote",[t("p",[s._v("循环依赖：两个Bean互相持有对方引用；")]),s._v(" "),t("blockquote",[t("p",[s._v("AB 循环依赖，A 实例化的时候，发现依赖 B，创建 B 实例，创建 B 的时候发现需要 A，创建 A1 实例……")])]),s._v(" "),t("p",[s._v("Spring只解决了单例模式下，通过setter方法进行依赖注入的情况；")])]),s._v(" "),t("p",[s._v("解决方式：三级缓存")]),s._v(" "),t("p",[s._v("一级缓存只保存初始化完成的Bean对象；")]),s._v(" "),t("p",[s._v("三级缓存保存Bean工厂对象，解决Bean早期引用问题，通过Bean工厂创建出Bean的代理对象；当检测到循环依赖时，可以通过这个工厂得到Bean的代理对象，这个代理对象放入二级缓存中；")]),s._v(" "),t("blockquote",[t("p",[s._v("三级缓存为什么存放ObjectFactory，不直接保存实例？")]),s._v(" "),t("p",[s._v("ObjectFactory对象可以对实例对象进行增强；")])]),s._v(" "),t("p",[s._v("二级缓存保存实例化完成但没有初始化好的Bean对象；")]),s._v(" "),t("blockquote",[t("p",[s._v("为什么需要二级缓存？")]),s._v(" "),t("p",[s._v("ObjectFactory每次创建的实例对象不一样，通过二级缓存拿到相同对象实例；")])]),s._v(" "),t("p",[s._v("案例：")]),s._v(" "),t("blockquote",[t("p",[s._v("假设两个 Bean A 和 B 存在循环依赖：")]),s._v(" "),t("ol",[t("li",[s._v("实例化 A 的时候把 A 的对象⼯⼚放⼊三级缓存，表示 A 开始实例化了。")]),s._v(" "),t("li",[s._v("实例化 B，发现依赖 A，就从一级缓存里找 A，但 A 还未完全初始化好，因此 B 转而从二级缓存中获取 A，如果二级缓存也没有，则从三级缓存中获取 A 的工厂对象，通过这个工厂对象获取 A 的早期引用（可能是 A 的代理对象），并将这个早期引用放入二级缓存，同时删除三级缓存中的 A。")]),s._v(" "),t("li",[s._v("使用 A 的早期引用完成 B 的创建和初始化，然后将 B 放入一级缓存。")]),s._v(" "),t("li",[s._v("在创建 B 的过程中，B 需要 A 的实例。此时，B 尝试从一级缓存获取 A，但 A 还未完全初始化好，因此 B 转而从二级缓存中获取 A，如果二级缓存也没有，则从三级缓存中获取 A 的工厂对象，通过这个工厂对象获取 A 的早期引用（可能是 A 的代理对象），并将这个早期引用放入二级缓存。")]),s._v(" "),t("li",[s._v("使用 A 的早期引用完成 B 的创建和初始化，然后将 B 放入一级缓存。")]),s._v(" "),t("li",[s._v("使用完全初始化好的 B 实例完成 A 的创建和初始化，最后将 A 也放入一级缓存。")])])]),s._v(" "),t("h2",{attrs:{id:"spring如何实现优雅停机"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#spring如何实现优雅停机"}},[s._v("#")]),s._v(" Spring如何实现优雅停机？")]),s._v(" "),t("p",[s._v("Spring也是依托于JVM实现的，它通过JVM的shutdownHook感知到Java进程关闭，然后执行doClose方法：")]),s._v(" "),t("blockquote",[t("p",[s._v("JVM优雅停机方式是通过"),t("code",[s._v("Runtime.getRuntime().addShutdownHook(shutdownTask);")])])]),s._v(" "),t("p",[s._v("doClose方法步骤：")]),s._v(" "),t("ol",[t("li",[s._v("发布一个容器关闭事件；")]),s._v(" "),t("li",[s._v("调用Bean生命周期关闭方法；")]),s._v(" "),t("li",[s._v("销毁所有Bean；")]),s._v(" "),t("li",[s._v("关闭Bean工厂；")]),s._v(" "),t("li",[s._v("调用子类关闭函数；")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// org.springframework.context.support.AbstractApplicationContext")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Deprecated")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//Spring 5 即将废弃")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("destroy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("close")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("close")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("synchronized")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("startupShutdownMonitor"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("doClose")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// If we registered a JVM shutdown hook, we don't need it anymore now:")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// We've already explicitly closed the context.")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("shutdownHook "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Runtime")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getRuntime")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("removeShutdownHook")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("shutdownHook"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("catch")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IllegalStateException")]),s._v(" ex"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ignore - VM is already shutting down")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("protected")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("doClose")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LiveBeansView")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("unregisterApplicationContext")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Publish shutdown event.")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("publishEvent")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ContextClosedEvent")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" ➀\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Stop all Lifecycle beans, to avoid delays during individual destruction.")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lifecycleProcessor "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lifecycleProcessor"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("onClose")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" ➁\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("catch")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Throwable")]),s._v(" ex"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            logger"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("warn")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Exception thrown from LifecycleProcessor on context close"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ex"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Destroy all cached singletons in the context's BeanFactory.")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("destroyBeans")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" ➂\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Close the state of this context itself.")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("closeBeanFactory")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" ➃\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Let subclasses do some final clean-up if they wish...")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("onClose")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" ➄\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Reset local application listeners to pre-refresh state.")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("earlyApplicationListeners "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("applicationListeners"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("clear")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("applicationListeners"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("addAll")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("earlyApplicationListeners"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Switch to inactive.")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("active"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("set")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br")])]),t("h2",{attrs:{id:"ioc初始化过程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ioc初始化过程"}},[s._v("#")]),s._v(" IOC初始化过程")]),s._v(" "),t("p",[s._v("在Spring中，IoC容器的初始化过程可以分为以下几个步骤：")]),s._v(" "),t("ol",[t("li",[s._v("读取配置文件：容器根据配置文件（如XML、注解等）读取bean的定义和其他相关信息。这些配置文件通常包含了bean的名称、类路径、依赖关系等。")]),s._v(" "),t("li",[s._v("创建BeanDefinition对象：根据读取到的配置信息，容器会创建对应的BeanDefinition对象。BeanDefinition对象保存了每个bean的元数据，包括类型、作用域、属性等。")]),s._v(" "),t("li",[s._v("解析依赖关系：容器会解析各个bean之间的依赖关系。通过查找BeanDefinition对象的属性或构造函数参数，容器可以确定bean之间的依赖关系。")]),s._v(" "),t("li",[s._v("实例化Bean对象：根据BeanDefinition的信息，容器会实例化各个bean对象。这通常是通过Java反射机制来创建bean实例。")]),s._v(" "),t("li",[s._v("属性注入：容器会将配置文件中定义的属性值注入到相应的bean实例中。这可以通过setter方法、字段注入或构造函数参数注入来完成。")]),s._v(" "),t("li",[s._v("Aware接口回调：如果bean实现了Aware接口，容器会调用相应的回调方法，将一些特殊的资源（如ApplicationContext）注入到bean中。")]),s._v(" "),t("li",[s._v("初始化回调：如果bean实现了InitializingBean接口或定义了init-method回调方法，容器会在bean实例化完成后调用这些方法，完成bean的初始化工作。")]),s._v(" "),t("li",[s._v("BeanPostProcessor处理：在bean初始化过程中，容器会调用注册的BeanPostProcessor实现类的方法，对bean进行一些额外的处理操作。")]),s._v(" "),t("li",[s._v("容器就绪：所有的bean都经过了初始化和处理后，容器就处于就绪状态，可以通过getBean()方法获取bean实例，并开始使用它们。")]),s._v(" "),t("li",[s._v("销毁回调：当容器关闭时，会调用bean实现了DisposableBean接口或定义了destroy-method回调方法的销毁方法，完成bean的清理工作。")])])])}),[],!1,null,null,null);t.default=e.exports}}]);